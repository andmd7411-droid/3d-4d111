(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{9571:function(e,t,s){Promise.resolve().then(s.bind(s,3641))},3641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),n=s(2265),r=s(7648);class i{registerAgent(e){if(this.agents.has(e.id)){console.warn("Agent ".concat(e.id," is already registered."));return}this.agents.set(e.id,e),e.setMessageCallback(this.handleMessage.bind(this)),console.log("[Orchestrator] Registered agent: ".concat(e.config.name," (").concat(e.config.role,")"))}async startAll(){console.log("[Orchestrator] Starting all agents...");let e=Array.from(this.agents.values()).map(e=>e.start());await Promise.all(e)}async stopAll(){console.log("[Orchestrator] Stopping all agents...");let e=Array.from(this.agents.values()).map(e=>e.stop());await Promise.all(e)}handleMessage(e){if(this.logMessage(e),this.notifyListeners(e),"BROADCAST"===e.to)this.agents.forEach(t=>{t.id!==e.from&&t.onMessage(e)});else{let t=this.agents.get(e.to);t?t.onMessage(e):console.warn("[Orchestrator] Message sent to unknown agent: ".concat(e.to))}}dispatch(e){this.handleMessage(e)}logMessage(e){this.messageLog.push(e),this.messageLog.length>1e3&&this.messageLog.shift()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(e){this.listeners.forEach(t=>t(e))}getAgents(){return Array.from(this.agents.values()).map(e=>e.config)}constructor(){this.agents=new Map,this.messageLog=[],this.listeners=[]}}let o=new i;class c{setMessageCallback(e){this.messageCallback=e}sendMessage(e,t,s){if(this.messageCallback){let a={id:crypto.randomUUID(),from:this.id,to:e,type:t,payload:s,timestamp:Date.now()};this.messageCallback(a)}else console.warn("Agent ".concat(this.id," tried to send message but has no callback"))}async start(){console.log("[Agent ".concat(this.config.name,"] Starting...")),this.status="IDLE",await this.onStart()}async stop(){console.log("[Agent ".concat(this.config.name,"] Stopping...")),this.status="PAUSED",await this.onStop()}constructor(e){this.status="IDLE",this.messageCallback=null,this.id=e.id,this.config=e}}class l extends c{async onStart(){console.log("[".concat(this.config.name,"] Ready for testing assignments.")),this.sendMessage("BROADCAST","AGENT_READY",{status:"Ready to test"})}async onStop(){console.log("[".concat(this.config.name,"] Going offline."))}async onMessage(e){"START_QA_SESSION"===e.type&&await this.runFullTest()}async runFullTest(){this.sendMessage("BROADCAST","QA_progress",{step:"Initializing Test Sequence",progress:0});try{await this.verifyElement("header h1","Files Converter"),await this.verifyElement('a[href="/"]',"Back Link"),await this.clickElement("button.btn-primary"),this.sendMessage("BROADCAST","QA_complete",{status:"PASSED",report:"DOM Elements verified."})}catch(e){this.sendMessage("BROADCAST","QA_complete",{status:"FAILED",report:e.message})}}async verifyElement(e,t){if(this.sendMessage("BROADCAST","QA_progress",{step:"Verifying ".concat(t,"..."),progress:10}),await new Promise(e=>setTimeout(e,500)),!document.querySelector(e))throw Error("Element not found: ".concat(e));this.sendMessage("BROADCAST","QA_LOG",{message:"✅ Found ".concat(t)})}async clickElement(e){this.sendMessage("BROADCAST","QA_progress",{step:"Clicking ".concat(e,"..."),progress:50}),await new Promise(e=>setTimeout(e,500));let t=document.querySelector(e);if(!t)throw Error("Click target not found: ".concat(e));t.click(),this.sendMessage("BROADCAST","QA_LOG",{message:"✅ Clicked ".concat(e)})}constructor(){super({id:"qa-agent-01",name:"QA Inspector",role:"QA",capabilities:["test-ui","report-error","verify-conversion"]})}}class d extends c{async onStart(){console.log("[".concat(this.config.name,"] Ready to build."))}async onStop(){console.log("[".concat(this.config.name,"] Signing off."))}async onMessage(e){"SCAFFOLD_PROPOSAL"===e.type&&await this.analyzeAndScaffold(e.payload)}async analyzeAndScaffold(e){this.sendMessage("BROADCAST","ARCHITECT_LOG",{message:"Analyzing requirements for: ".concat(e.featureName,"...")});let t=e.slug,s="'use client'\nimport Link from 'next/link'\n\nexport default function ".concat(e.featureName.replace(/\s+/g,""),'Page() {\n    return (\n        <div className="min-h-screen gradient-section3 p-8">\n            <header className="mb-8">\n                <Link href="/" className="text-white hover:underline mb-4 inline-block">← Back to Home</Link>\n                <h1 className="text-5xl font-bold text-white mb-2">').concat(e.featureName,'</h1>\n                <p className="text-white/80">Automated Scaffold by Architect Agent</p>\n            </header>\n            <div className="card text-center py-20">\n                <div className="text-6xl mb-4">\uD83D\uDEA7</div>\n                <h2 className="text-2xl font-bold text-white">Under Construction</h2>\n                <p className="text-white/60">This feature was scaffolded by an AI Agent.</p>\n            </div>\n        </div>\n    )\n}'),a="// Scaffolded by Architect Agent\nexport interface ".concat(e.featureName.replace(/\s+/g,""),"Options {\n    quality: number;\n}\n\nexport function convert(input: any, options: ").concat(e.featureName.replace(/\s+/g,""),"Options) {\n    console.log('Conversion logic placeholder');\n    return null;\n}");this.sendMessage("BROADCAST","ARCHITECT_LOG",{message:"Blueprint generated. Writing files to disk..."});try{let e=await fetch("/api/agents/scaffold",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:[{path:"src/app/".concat(t,"/page.tsx"),content:s},{path:"src/lib/converters/".concat(t,".ts"),content:a}]})}),n=await e.json();if(n.success)this.sendMessage("BROADCAST","ARCHITECT_COMPLETE",{status:"SUCCESS",files:n.created}),this.sendMessage("BROADCAST","ARCHITECT_LOG",{message:"Successfully created ".concat(n.created.length," files.")});else throw Error(n.error)}catch(e){this.sendMessage("BROADCAST","ARCHITECT_ERROR",{error:"Failed to write files: ".concat(e)})}}constructor(){super({id:"architect-agent-01",name:"System Architect",role:"ARCHITECT",capabilities:["analyze-structure","scaffold-feature"]})}}function h(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)("Idle"),c=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{if(c.current)return;c.current=!0;let e=new l,s=new d;o.registerAgent(e),o.registerAgent(s);let a=o.subscribe(e=>{t(t=>[e,...t]),"QA_progress"===e.type?i("Testing: ".concat(e.payload.step," (").concat(e.payload.progress,"%)")):"QA_complete"===e.type&&i("Complete: ".concat(e.payload.status))});return o.startAll(),()=>{a(),o.stopAll()}},[]),(0,a.jsxs)("div",{className:"min-h-screen gradient-section2 p-8 text-white",children:[(0,a.jsxs)("header",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.default,{href:"/",className:"text-white/70 hover:text-white mb-2 inline-block",children:"← Back"}),(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"\uD83D\uDD75️ Agent Command Center"}),(0,a.jsx)("p",{className:"opacity-80",children:"Observe and control autonomous agents"})]}),(0,a.jsxs)("div",{className:"bg-white/10 px-4 py-2 rounded-lg",children:["System Status: ",(0,a.jsx)("span",{className:"font-bold text-green-400",children:s})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"card space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold border-b border-white/10 pb-2",children:"Controls"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>{o.dispatch({id:crypto.randomUUID(),from:"USER_DASHBOARD",to:"qa-agent-01",type:"START_QA_SESSION",payload:{},timestamp:Date.now()})},className:"w-full btn-primary bg-blue-500 hover:bg-blue-600",children:"▶ Run Full QA Test"}),(0,a.jsx)("button",{onClick:()=>{o.dispatch({id:crypto.randomUUID(),from:"USER_DASHBOARD",to:"architect-agent-01",type:"SCAFFOLD_PROPOSAL",payload:{featureName:"Audio Converter",slug:"audio-converter"},timestamp:Date.now()})},className:"w-full btn-primary bg-purple-500 hover:bg-purple-600",children:"\uD83C\uDFD7️ Scaffold New Feature (Demo)"})]}),(0,a.jsxs)("div",{className:"bg-black/30 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-bold mb-2 text-sm text-gray-400",children:"Active Agents"}),(0,a.jsx)("ul",{className:"space-y-2",children:(0,a.jsxs)("li",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"QA Inspector (IDLE)"]})})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 card flex flex-col h-[600px]",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold border-b border-white/10 pb-2 mb-4",children:["Live Agent Logs",(0,a.jsxs)("span",{className:"ml-2 text-xs font-normal opacity-60",children:["(",e.length," events)"]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto font-mono text-sm space-y-2 pr-2 custom-scrollbar",children:[0===e.length&&(0,a.jsx)("div",{className:"text-white/30 text-center mt-20",children:"Waiting for agent activity..."}),e.map(e=>(0,a.jsxs)("div",{className:"p-2 rounded hover:bg-white/5 border-l-2 border-transparent hover:border-white/20 transition-all",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs opacity-50 mb-1",children:[(0,a.jsx)("span",{children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsxs)("span",{children:[e.from," → ",e.to]})]}),(0,a.jsx)("div",{className:"font-bold text-blue-300 mb-1",children:e.type}),(0,a.jsx)("div",{className:"text-white/80 whitespace-pre-wrap break-words",children:JSON.stringify(e.payload,null,2)})]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"card mt-6 p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold border-b border-white/10 pb-2 mb-4",children:"\uD83D\uDDA5️ Test Environment"}),(0,a.jsx)("div",{className:"bg-white rounded-lg overflow-hidden h-[500px] border-4 border-gray-800",children:(0,a.jsx)("iframe",{id:"qa-target",className:"w-full h-full bg-white",title:"QA Testing Sandbox"})})]})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9571)}),_N_E=e.O()}]);