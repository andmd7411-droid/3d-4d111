(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{7232:function(e,t,a){Promise.resolve().then(a.bind(a,5120))},5120:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var s=a(7437),r=a(2265),i=a(7648);class n{static async convert(e,t){let a=await createImageBitmap(e),s=document.createElement("canvas"),r=s.getContext("2d");if(!r)throw Error("Could not get 2D context");let{width:i,height:n}=this.calculateDimensions(a.width,a.height,t.width,t.height,t.maintainAspectRatio);s.width=i,s.height=n,r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(a,0,0,i,n);let l=this.getMimeType(t.format);return t.format,t.format,new Promise((e,a)=>{s.toBlob(s=>{s?e(s):a(Error("Conversion to ".concat(t.format," failed")))},l,t.quality||.92)})}static calculateDimensions(e,t,a,s){let r=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(!a&&!s)return{width:e,height:t};let i=a||e,n=s||t;if(r){let r=e/t;a&&!s?n=Math.round(i/r):!a&&s?i=Math.round(n*r):a&&s&&(r>a/s?n=Math.round(i/r):i=Math.round(n*r))}return{width:i,height:n}}static getMimeType(e){switch(e){case"JPG":return"image/jpeg";case"PNG":case"ICO":default:return"image/png";case"WEBP":return"image/webp";case"BMP":return"image/bmp";case"GIF":return"image/gif";case"SVG":return"image/svg+xml"}}}var l=a(3375),o=a(7970);class c{static async convert(e,t){var a;let s=await e.text(),r=(null===(a=e.name.split(".").pop())||void 0===a?void 0:a.toUpperCase())||"TXT",i=s;switch("MD"===r&&"HTML"===t.format?i=await (0,o.TU)(s):"HTML"===r&&"TXT"===t.format&&(i=this.stripHtml(s)),t.format){case"PDF":return this.generatePdf(i,t);case"HTML":return new Blob([i],{type:"text/html"});case"MD":return new Blob([i],{type:"text/markdown"});default:return new Blob([i],{type:"text/plain"})}}static generatePdf(e,t){let a=new l.kH,s=t.fontSize||12,r=t.margin||10,i=.5*s;a.setFontSize(s);let n=a.splitTextToSize(e,190-2*r),o=r;return n.forEach(e=>{o>280&&(a.addPage(),o=r),a.text(e,r,o),o+=i+s/3}),a.output("blob")}static stripHtml(e){let t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}}var d=a(1448),m=a(7213),h=a(5087),u=a(2046),p=a(3946),x=a(4161),g=a(9354),w=a(6775);class f{static async convert(e,t){var a;let s=(null===(a=e.name.split(".").pop())||void 0===a?void 0:a.toUpperCase())||"",r=await e.arrayBuffer(),i=await this.loadModel(r,s);return this.exportModel(i,t)}static async loadModel(e,t){return new Promise((a,s)=>{switch(t){case"STL":let r=new m.j().parse(e);a(new d.Kj0(r));break;case"OBJ":let i=new h.L,n=new TextDecoder().decode(e);a(i.parse(n));break;case"GLTF":case"GLB":new u.E().parse(e,"",e=>{a(e.scene)},e=>s(e));break;default:s(Error("Unsupported source format: ".concat(t)))}})}static async exportModel(e,t){return new Promise((a,s)=>{try{switch(t.format){case"STL":let r=new p.r().parse(e,{binary:!1!==t.binary});a(new Blob([r],{type:"application/octet-stream"}));break;case"OBJ":let i=new x.h().parse(e);a(new Blob([i],{type:"text/plain"}));break;case"GLTF":case"GLB":new g.M().parse(e,e=>{if(e instanceof ArrayBuffer)a(new Blob([e],{type:"application/octet-stream"}));else{let t=JSON.stringify(e);a(new Blob([t],{type:"application/json"}))}},e=>s(e),{binary:"GLB"===t.format||t.binary});break;case"PLY":new w.V().parse(e,e=>{a(new Blob([e],{type:"application/octet-stream"}))},{});break;default:s(Error("Unsupported target format: ".concat(t.format)))}}catch(e){s(e)}})}}var b=a(2877),v=a(3847);class y{static async load(){if(this.ffmpeg)return this.ffmpeg;if(this.isLoading){for(;this.isLoading;)await new Promise(e=>setTimeout(e,100));if(this.ffmpeg)return this.ffmpeg}if("undefined"==typeof SharedArrayBuffer)throw Error("SharedArrayBuffer is not defined. This browser environment does not support the required security headers for FFmpeg.wasm (Cross-Origin-Opener-Policy: same-origin, Cross-Origin-Embedder-Policy: require-corp).");this.isLoading=!0;try{let e=new b.C,t="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";return console.log("Loading FFmpeg.wasm from:",t),await e.load({coreURL:await (0,v.Wn)("".concat(t,"/ffmpeg-core.js"),"text/javascript"),wasmURL:await (0,v.Wn)("".concat(t,"/ffmpeg-core.wasm"),"application/wasm")}),console.log("FFmpeg loaded successfully"),this.ffmpeg=e,e}catch(e){if(console.error("Failed to load FFmpeg:",e),e instanceof Error)throw Error("FFmpeg Load Error: ".concat(e.message));throw e}finally{this.isLoading=!1}}static async convert(e,t){let a=await this.load();if(!a)throw Error("FFmpeg failed to load");let{format:s,onProgress:r}=t;r&&r(0),a.on("progress",e=>{let{progress:t,time:a}=e;r&&t>=0&&t<=1&&r(Math.round(100*t))});try{let t="input"+this.getExtension(e.name),i="output."+s.toLowerCase();await a.writeFile(t,await (0,v.dc)(e));let n=["-i",t];switch(s){case"MP4":n.push("-c:v","libx264","-c:a","aac");break;case"WEBM":n.push("-c:v","libvpx","-c:a","libvorbis");break;case"GIF":n.push("-vf","fps=10,scale=320:-1:flags=lanczos");break;case"MP3":n.push("-b:a","192k")}n.push(i),await a.exec(n);let l=await a.readFile(i),o=this.getMimeType(s),c=new Blob([l],{type:o});return await a.deleteFile(t),await a.deleteFile(i),r&&r(100),c}catch(e){throw console.error("Conversion error:",e),e}}static getExtension(e){let t=e.match(/\.[^.]+$/);return t?t[0]:""}static getMimeType(e){switch(e){case"MP3":return"audio/mpeg";case"WAV":return"audio/wav";case"OGG":return"audio/ogg";case"AAC":return"audio/aac";case"MP4":return"video/mp4";case"WEBM":return"video/webm";case"AVI":return"video/x-msvideo";case"MOV":return"video/quicktime";case"GIF":return"image/gif";default:return"application/octet-stream"}}}y.ffmpeg=null,y.isLoading=!1;var j=a(5389),N=a(8497),C=a(473);let D=[{category:"Images",icon:"\uD83D\uDDBC️",from:"Image",to:["JPG","PNG","WEBP","BMP","ICO"]},{category:"Documents",icon:"\uD83D\uDCC4",from:"Document",to:["PDF","TXT","MD","HTML"]},{category:"3D Models",icon:"\uD83C\uDFA8",from:"3D",to:["STL","OBJ","GLTF","PLY","GLB"]},{category:"Audio",icon:"\uD83C\uDFB5",from:"Audio",to:["MP3","WAV","OGG","AAC"]},{category:"Video",icon:"\uD83C\uDFAC",from:"Video",to:["MP4","WEBM","GIF","AVI","MOV"]},{category:"Archives",icon:"\uD83D\uDCE6",from:"Archive",to:["ZIP"]}];function F(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(0),[x,g]=(0,r.useState)(null),[w,b]=(0,r.useState)(0),[v,F]=(0,r.useState)(""),{user:k}=(0,j.a)(),[M,S]=(0,r.useState)(!1),[B,P]=(0,r.useState)(!1),L=(0,r.useRef)(null),[T,E]=(0,r.useState)(.9),[I,G]=(0,r.useState)(""),[A,O]=(0,r.useState)(""),[U,V]=(0,r.useState)(!0),[J,R]=(0,r.useState)(12),[W,z]=(0,r.useState)(10),[H,X]=(0,r.useState)(!0),_=(0,r.useCallback)(e=>{var a,s;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;t(r),g(null),p(0),F(""),E(.9),G(""),O(""),R(12),z(10),X(!0);let i=(null===(s=r.name.split(".").pop())||void 0===s?void 0:s.toUpperCase())||"",n=D.find(e=>e.to.includes(i)||"Images"===e.category&&["JPG","JPEG","PNG","WEBP","BMP","GIF"].includes(i));n?l(n.category):["JPG","JPEG","PNG","WEBP","BMP","GIF","TIFF","AVIF"].includes(i)?l("Images"):["TXT","MD","HTML","JS","TS","CSS","JSON","XML","CSV"].includes(i)?l("Documents"):["STL","OBJ","GLTF","GLB","PLY","3DS","FBX"].includes(i)&&l("3D Models")},[]),q=(0,r.useCallback)(async()=>{if(!e||!o)return;h(!0),p(10),g(null);let t=performance.now();try{if("Images"===a){let t={format:o,quality:T,width:I?Number(I):void 0,height:A?Number(A):void 0,maintainAspectRatio:U};p(40),await new Promise(e=>setTimeout(e,50));let a=await n.convert(e,t);g(a)}else if("Documents"===a){p(40),await new Promise(e=>setTimeout(e,50));let t=await c.convert(e,{format:o,fontSize:J,margin:W});g(t)}else if("Audio"===a||"Video"===a){F("Loading FFmpeg core (first time may take longer)...");try{let t=await y.convert(e,{format:o,onProgress:e=>{p(e),F("Encoding... ".concat(Math.round(e),"%"))}});g(t)}catch(e){if(console.error("Conversion failed:",e),e.message.includes("SharedArrayBuffer"))throw Error("Browser security headers missing. Please restart the dev server or check next.config.mjs.");if(e.message.includes("FFmpeg Load Error"))throw Error(e.message);throw e}}else if("3D Models"===a){p(30),await new Promise(e=>setTimeout(e,100));let t=await f.convert(e,{format:o,binary:H});g(t)}p(100)}catch(e){console.error(e),alert("Conversion failed: "+e)}finally{b(Math.round(performance.now()-t)),h(!1)}},[e,o,a,T,I,A,U,J,W,H]),Q=(0,r.useCallback)(()=>{if(!x&&!e)return;let t=x||e;if(!t)return;let a=URL.createObjectURL(t),s=document.createElement("a");s.href=a;let r=(null==e?void 0:e.name)||"converted",i=r.substring(0,r.lastIndexOf("."))||r,n=o.toLowerCase()||"converted";s.download="".concat(i,"_converted.").concat(n),s.click(),URL.revokeObjectURL(a)},[x,e,o]);(0,r.useEffect)(()=>{if(e&&"Images"===a){let t=new Image;t.onload=()=>{G(t.width),O(t.height)},t.src=URL.createObjectURL(e)}},[e,a]);let K=D.find(e=>e.category===a);return(0,s.jsxs)("div",{className:"min-h-screen gradient-section3 p-8",children:[(0,s.jsxs)("header",{className:"mb-8",children:[(0,s.jsx)(i.default,{href:"/",className:"text-white hover:underline mb-4 inline-block",children:"← Back to Home"}),(0,s.jsx)("h1",{className:"text-5xl font-bold text-white mb-2",children:"Universal File Converter"}),(0,s.jsx)("p",{className:"text-white/80",children:"Convert between formats with professional quality control"})]}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"card mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Select Category"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:D.map(e=>(0,s.jsxs)("button",{onClick:()=>{l(e.category),d(""),g(null)},className:"card text-center transition-all ".concat(a===e.category?"bg-white/20 scale-105 border-white/50":"bg-white/5 hover:bg-white/10"),children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:e.icon}),(0,s.jsx)("div",{className:"text-white text-sm font-semibold",children:e.category})]},e.category))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"card space-y-6 lg:col-span-1",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"1. Upload File"}),(0,s.jsx)("div",{onClick:()=>{var e;return null===(e=L.current)||void 0===e?void 0:e.click()},className:"border-2 border-dashed border-white/30 rounded-lg p-8 text-center cursor-pointer hover:border-white/60 transition-all hover:bg-white/5",children:e?(0,s.jsxs)("div",{className:"text-white",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"Images"===a?"\uD83D\uDDBC️":"Documents"===a?"\uD83D\uDCC4":"\uD83C\uDFA8"}),(0,s.jsx)("p",{className:"font-semibold break-all",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-white/60 mt-2",children:[(e.size/1024).toFixed(2)," KB"]})]}):(0,s.jsxs)("div",{className:"text-white/60",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"⬆️"}),(0,s.jsx)("p",{className:"text-lg",children:"Click to Upload"})]})}),(0,s.jsx)("input",{ref:L,type:"file",onChange:_,className:"hidden","aria-label":"File Upload"}),e&&(0,s.jsx)("button",{onClick:()=>{t(null),d(""),g(null)},className:"btn-primary w-full bg-red-500/20 hover:bg-red-500/40 text-white",children:"\uD83D\uDDD1️ Clear File"})]}),(0,s.jsxs)("div",{className:"card space-y-6 lg:col-span-1",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"2. Settings"}),K?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Target Format"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:K.to.map(e=>(0,s.jsx)("button",{onClick:()=>d(e),className:"px-3 py-2 rounded text-sm font-bold transition-colors ".concat(o===e?"bg-white text-purple-900":"bg-white/10 text-white hover:bg-white/20"),children:e},e))}),"Images"===a&&(0,s.jsxs)("div",{className:"pt-4 border-t border-white/10 space-y-4 animate-fadeIn",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"flex justify-between text-white text-sm mb-1",children:[(0,s.jsx)("span",{children:"Quality"}),(0,s.jsxs)("span",{children:[Math.round(100*T),"%"]})]}),(0,s.jsx)("input",{type:"range",min:"0.1",max:"1.0",step:"0.05",value:T,onChange:e=>E(parseFloat(e.target.value)),className:"w-full accent-white","aria-label":"Image Quality"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("label",{className:"text-white text-sm",children:"Resize (px)"}),(0,s.jsxs)("label",{className:"flex items-center space-x-2 text-xs text-white/70",children:[(0,s.jsx)("input",{type:"checkbox",checked:U,onChange:e=>V(e.target.checked),className:"rounded"}),(0,s.jsx)("span",{children:"Lock Aspect Ratio"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"number",placeholder:"W",value:I,onChange:e=>G(Number(e.target.value)),className:"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-sm"}),(0,s.jsx)("span",{className:"text-white self-center",children:"x"}),(0,s.jsx)("input",{type:"number",placeholder:"H",value:A,onChange:e=>O(Number(e.target.value)),className:"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-sm"})]})]})]}),"Documents"===a&&(0,s.jsxs)("div",{className:"pt-4 border-t border-white/10 space-y-4 animate-fadeIn",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-white text-sm",children:"Font Size (pt)"}),(0,s.jsx)("input",{type:"number",value:J,onChange:e=>R(Number(e.target.value)),className:"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-sm","aria-label":"Font Size"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-white text-sm",children:"Margin (mm)"}),(0,s.jsx)("input",{type:"number",value:W,onChange:e=>z(Number(e.target.value)),className:"w-full bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-sm","aria-label":"Margin"})]})]}),"3D Models"===a&&(0,s.jsx)("div",{className:"pt-4 border-t border-white/10 space-y-4 animate-fadeIn",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:H,onChange:e=>X(e.target.checked),className:"rounded","aria-label":"Binary Export"}),(0,s.jsx)("label",{className:"text-white text-sm",children:"Binary Export (Smaller Size)"})]})})]}):(0,s.jsx)("div",{className:"text-white/40 text-center py-8",children:"Select a category and file first"})]}),(0,s.jsxs)("div",{className:"card space-y-6 lg:col-span-1 bg-white/5 border border-white/10",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"3. Convert"}),(0,s.jsx)("div",{className:"flex flex-col h-full justify-between",children:(0,s.jsxs)("div",{className:"space-y-4",children:[m&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-400 h-2 rounded-full transition-all duration-300",style:{width:"".concat(u,"%")}})}),(0,s.jsxs)("p",{className:"text-white text-center text-sm",children:["Processing... ",u,"%"]})]}),!x&&(0,s.jsx)("button",{onClick:q,disabled:!e||!o||m,className:"btn-primary w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 transition-all",children:m?"⏳ Working...":"⚡ Convert Now"}),x&&(0,s.jsxs)("div",{className:"animate-scaleIn bg-green-500/20 border border-green-500/50 rounded-lg p-4 text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"✅"}),(0,s.jsx)("h3",{className:"text-white font-bold text-lg mb-1",children:"Conversion Complete!"}),(0,s.jsxs)("p",{className:"text-white/70 text-sm mb-4",children:["Time: ",w,"ms • Size: ",(x.size/1024).toFixed(2)," KB"]}),(0,s.jsxs)("button",{onClick:()=>{Q()},className:"btn-primary w-full bg-green-500 hover:bg-green-600 text-white shadow-lg animate-pulse",children:["\uD83D\uDCBE Download ",o]}),(0,s.jsx)("button",{onClick:()=>g(null),className:"text-white/50 text-xs mt-3 hover:text-white underline",children:"Convert Another"})]})]})})]})]})]}),(0,s.jsx)(N.Q,{isOpen:M,onClose:()=>S(!1)}),(0,s.jsx)(C.X,{isOpen:B,onClose:()=>P(!1),onSuccess:()=>{P(!1),Q()}})]})}}},function(e){e.O(0,[689,125,505,648,65,145,971,117,744],function(){return e(e.s=7232)}),_N_E=e.O()}]);